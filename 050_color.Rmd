# About Color

```{r include = FALSE}

# Load some libraries
library(knitr)
library(kableExtra) # For building pretty tables
library(here)

# Set the rproj home directory
here::here()

# Set some knitr options
options(knitr.table.format = "html")
knitr::opts_chunk$set(
  collapse = TRUE,
  strip.white = TRUE,
  comment = "#>",
  out.width = "65%",
  message=FALSE,
  warnings=FALSE
)

# Turn on the DataCamp Light interactive tools
tutorial::go_interactive()

```

## Introduction

Most visualization tasks in _R_ are enhanced by the use of color. Color can make groups stand out or make it easy to quickly determine what a graph is saying. This is a background lesson about using color in _R_, there are no required activities to complete.

<div class="grsnote">There are no deliverables required for this lesson.</div>

-----

## Colors

Consider the following plot of the [faithful] data frame.

```{r fig.width=4.5,fig.height=4,fig.align="center", echo=FALSE, message=FALSE, warnings=FALSE, tut=FALSE}
plot(faithful,
     main = "Old Faithful Information",
     xlab = "Eruption Time",
     ylab = "Waiting Time",
     pch = 19
     )
```

_R_ is able to color those dots in order to make the visualization more appealing and, perhaps, enhance a reader's ability to understand the data. _R_ has a vocabulary of 657 colors (including 99 levels of grey), and those color names can be listed with the command `colors()`. 

```{r}

colors()

```

A PDF file, [Rcolor.pdf](http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf), is available that lists all of the colors along with a small sample of each color. 

Researchers can use any one of the available colors by simply including its name in a visualization command. For example, the following code chunk will draw the [faithful] plot, but the color named on line 6 can be changed to any of the 657 colors available in order to see what the color looks like in a scatter plot. 

```{r}
plot(faithful,
     main = "Old Faithful Information",
     xlab = "Eruption Time",
     ylab = "Waiting Time",
     pch = 19,
     col = "firebrick3"
     )

```


-----

# Color Palettes

Most  visualizations require more than one color to properly display the data. Consider, for example, this bar plot from the [mtcars] data frame.

```{r fig.width=4.5, fig.height=4, out.width="40%", fig.align="center", echo=FALSE, message=FALSE, warnings=FALSE, tut=FALSE}

barplot(height = table(mtcars$cyl, mtcars$gear),
  main = "Cars by Gears and Cylinders",
  xlab = "Gears",
  ylab = "Count",
  legend = TRUE,
  beside = TRUE,
  args.legend = list(title = "Cylinders")
)

```

The default colors applied, various shades of grey, are useable but there are easy ways to make the plot more pleasing and understandable.

_R_ includes a number of different color palettes that each contain multiple colors that can be used with these types of visualizations. Here are samples from the five primary color palettes.

```{r fig.dim=c(2.5,4.0), fig.align="center", echo=FALSE, message=FALSE, warnings=FALSE, tut=FALSE}
d <- as.table(c(1,1,1,1,1,1,1,1,1,1))
par(mfrow = c(5,1), mai = c(0.35,0.35,0.35,0.35), cex.main = 1.5)
barplot(d, col = cm.colors(10), axisnames = FALSE, axes = FALSE, main = "cm (cyan-magenta)")
barplot(d, col = heat.colors(10), axisnames = FALSE, axes = FALSE, main = "heat")
barplot(d, col = rainbow(10), axisnames = FALSE, axes = FALSE, main = "rainbow")
barplot(d, col = terrain.colors(10), axisnames = FALSE, axes = FALSE, main = "terrain")
barplot(d, col = topo.colors(10), axisnames = FALSE, axes = FALSE, main = "topo")

```

Adding the _heat_ color palette on the last line of the script for the barplot generated above makes it easier to read. That line can be changed to explore all five of the color palettes.

```{r fig.width=4.5, fig.height=4, out.width="40%", fig.align="center", echo=FALSE, message=FALSE, warnings=FALSE, tut=FALSE}

barplot(height = table(mtcars$cyl, mtcars$gear),
  main = "Cars by Gears and Cylinders",
  xlab = "Gears",
  ylab = "Count",
  legend = TRUE,
  beside = TRUE,
  args.legend = list(title = "Cylinders"),
  col = heat.colors(3)
)

```

When using color with graphics it is important for the researcher to keep two points in mind.

1. First, it is estimated that about 8% of males and 0.5% of females are unable to distinguish between two or more colors, a condition that is often called “color blindness.”

2. Second, if the research is ever printed in a black-and-white form then all color information is lost.

For these two reasons, it is probably best to not rely on color alone to provide information to the reader; rather, color should be used to enhance the understanding of a chart without being a sole source of information for that chart. 

### Demonstration: Grouped Boxplots With Color

Grouped boxplots are easy to create with _R_ and the following script generates three examples.

* Lines 2-5: This is one long command that is broken over several lines to make it easier to read. Note that _R_ does not require any sort of special “line continuation” character at the end of each line. As long as the parentheses started after the `boxplot` keyword does not close then _R_ will continue reading that command on the next line.
* Line 2: **Temp ~ Month** This tells _R_ to calculate the boxplot for the _Temperature_ variable but group those temperatures by _Month_. It is important to remember the order for these two variables. First is the continuous data that should be analyzed and second is the grouping variable.
* Line 3: **data = airquality** In previous tutorials, the data frame name was prepended to the variable name using the `$` operator. However, for simplicity, many _R_ functions are designed to enter only the vector names and then specify the data frame later in the function. In this case, the [airquality] data frame is identified as the source for the two variables being plotted.
* Line 4: **main = “Temp By Month”** This is the main title for the boxplot and is automatically printed in large font abovethe boxplot. _R_ has a number of other formatting options available and several will be covered in later labs.
* Line 5: **col = rainbow(8)** This sets the color palette to rainbow and instructs _R_ to use eight colors from that palette. It is often useful to experiment with the number of colors requested from the palette since the colors selected will change depending on the number requested and some combinations may be more useful than others.
* Lines 7-11: These are similar to Lines 2-5 but use the [warpbreaks] data frame. Notice that selecting the "heat" color palette is slightly different than the rainbow palette used above.
* Lines 13-18: These lines are similar to Lines 7-11 but use the [chickwts] data frame. A new attribute was specified: _las = 2_. For this boxplot the groups are names of chicken feed rather than numbers or single letters. When those names are printed horizontally they “run into each other” and become unreadable. The _las = 2_ specification turns those labels 90&deg; so they do not interfere with each other.

<span class="grshilite">This demonstration contains three different examples of generating grouped boxplots with color.</span>

```{r}
# Boxplot of airquality data
boxplot(Temp ~ Month, 
        data = airquality,
        main = "Temp By Month", 
        col = rainbow(8))

# Boxplot of warpbreaks data
boxplot(breaks ~ tension, 
        data = warpbreaks,
        main = "Breaks by Tension", 
        col = heat.colors(3))

# Boxplot of chickwts data
boxplot(weight ~ feed, 
        data = chickwts,
        main = "Chick Weight by Feed",
        col = topo.colors(6), 
        las = 2)

```

