# (PART) Descriptive Statistics {-}

# Central Measures

```{r include = FALSE}

# Load some libraries
library(knitr)
library(kableExtra) # For building pretty tables
library(tutorial)
library(here)

# Set the rproj home directory
here::here()

# Set some knitr options
options(knitr.table.format = "html")
knitr::opts_chunk$set(
  collapse = TRUE,
  strip.white = TRUE,
  comment = "#>",
  out.width = "65%",
  message=FALSE,
  warnings=FALSE
)

# Turn on the DataCamp Light interactive tools
tutorial::go_interactive()

```


## Introduction

It is often desirable to characterize an entire vector of numbers with a single value and the number that is "in the middle" of the vector would seem most logical to use. Students in elementary school are taught how to find the average of a group of numbers and they learn that the average is the best representation for that entire group. In statistics, though, there are several different numbers that are often used to represent an entire vector of numbers and these are  collectively known as the Central Measures, or numbers that are the "middle" of the vector.

<div class="grsnote">A _vector_ is nothing more than a list of related items. For example, a vector of street names may look like `c("elm", "main", "first", "raven")` and a vector of test scores may look like `c(83, 91, 76, 88)`. Notice that vectors in _R_ are created with a `c()` (for "combine") operator.</div>

-----

## N

One of the simplest of measures is nothing more than the number of items in a vector. For example, for the vector 5, 7, 13, 22 the _N_ (number of items) is 4. Technically, _N_ does not identify the middle of a vector but it is an important measure and is included here for completeness.

### Demonstration: N

To find the number of items in a vector ( _N_ ), use the `length` procedure as found in the _R_ script below.

* Line 2: The length of the [rivers] vector is printed, which is the same as the number of items in that vector, or _N_.
* Line 3: The length of the _eruptions_ vector in the [faithful] data frame is printed, which is the same as the number of items in the vector, or _N_. **The [faithful] data frame contains more than one vector so it is necessary to specify both the data frame name and the vector name using a dollar sign operator.**

<span class="grshilite">This demonstration contains two different examples of finding N.</span>

```{r}

# Finding N
length(rivers)
length(faithful$eruptions)

```

### Skill Check: N

Using the [attitude] data frame, find _N_ for _critical_.

```{r ex="ex02.01", type="pre-exercise-code"}

# No pre-exercise code for this exercise

```

```{r ex="ex02.01", type="sample-code"}

# Find N for 'critical' in the 'attitude' data frame

```


```{r ex="ex02.01", type="solution"}

length(attitude$critical)

```

```{r ex="ex02.01", type="sct"}

ex1neq <- "Make sure the vector name includes the data frame: attitude$critical."

ex() %>%
  check_function("length") %>%
  check_result() %>%
  check_equal(incorrect_msg = ex1neq)

success_msg("Perfect! Now you know how many items are in the 'critical' vector!")

```

### Activity 2.1

Using the [cafe] data, find the number of items in the _age_ vector and include that number in the deliverable document for this lab.

```{r ex="act02.01", type="pre-exercise-code"}

cafe <- read.csv('https://labs.basv316.com/cafe.csv')

```

```{r ex="act02.01", type="sample-code"}
# Find the number of items in the age vector.



```


-----

## Mean

The mean is calculated by adding all of the data items together and then dividing that sum by the number of items ( _N_ ), which is taught in elementary school as the average. For example, given the vector: 6, 8, 9, the total is 23 and that divided by 3 ( _N_ ) is 7.66; so the mean of 6, 8, 9 is 7.66.

### Demonstration: Mean

To find the mean of a vector, use the `mean` procedure as found in the _R_ script below.

* Lines 3-4: Calculate the means for _eruptions_ and _waiting_ in the [faithful] data frame.
* Lines 9-12: Calculate the means for various variables in the [iris] data frame.

<span class="grshilite">This demonstration contains six different examples of finding the mean.</span>

```{r}
# Find means for faithful
mean(faithful$eruptions)
mean(faithful$waiting)

# Find means for iris
mean(iris$Sepal.Width)
mean(iris$Sepal.Length)
mean(iris$Petal.Width)
mean(iris$Petal.Length)
```

### Skill Check: Mean

Using the [attitude] data frame, find the mean for _critical_.

```{r ex="ex02.02", type="pre-exercise-code"}

# No pre-exercise code for this exercise

```

```{r ex="ex02.02", type="sample-code"}
# Find the mean for 'critical' in the 'attitude' data frame



```

```{r ex="ex02.02", type="solution"}

mean(attitude$critical)

```

```{r ex="ex02.02", type="sct"}

ex2neq <- "Make sure the vector name includes the data frame: attitude$critical."

ex() %>%
  check_function("mean") %>%
  check_result() %>%
  check_equal(incorrect_msg = ex2neq)

success_msg("Perfect! Now you know the mean for the 'critical' vector!")

```

### Activity 2.2: Mean

Using the [cafe] data frame, find the mean for _age_. Include that answer in the deliverable document for this lab.

```{r ex="act02.02", type="pre-exercise-code"}

cafe <- read.csv('https://labs.basv316.com/cafe.csv')

```

```{r ex="act02.02", type="sample-code"}
# Using the cafe data frame, find the mean for age.



```

-----

## Trimmed Mean

If a vector has outliers, or values that are unusually large or small, then the mean is often skewed such that it no longer represents the "average" value. As an example, the length (in miles) of the 141 longest rivers in North America ranges from 135 to 3710 and the mean of these values is 591 miles (these data are found in the [rivers] data frame included with _R_). Unfortunately, because the lengths of the top few rivers are disproportionately higher than the rest of the values in the vector (their lengths are [outliers]), the mean is skewed upward. One way to compensate for outliers is to use a trimmed mean (sometimes called a truncated mean). A trimmed mean is calculated by removing a specific number of values from both the top and bottom of the vector and then finding the mean of the remaining values. In the case of the rivers vector, if 5% of the values are removed from both the top and bottom (7 values from each end of the vector, for 10% total) then 127 values remain with a range from 230 to 1450 and the trimmed mean for that vector is 519. It is not possible, or desirable, to trim a different amount from the top and bottom. A trimmed mean always trims the same amount from both ends of the vector. Trimming the vector effectively removes both upper and lower outliers and produces a much more reasonable central value for this vector. In actual practice, a trimmed mean is not commonly used since it is difficult to know how much to trim from the vector and the resulting mean may be just as skewed as if no values were trimmed; thus, when outliers are suspected, the best "middle" term to report is the median.

### Demonstration: Trimmed Mean

The trimmed mean can be easily found in _R_ by adding a "trim" parameter to the `mean` command, as demonstrated in the following script. 

* Lines 2-4: calculate the trimmed mean by including "trim=..." in the `mean` function. Line 3 trims 15% from each end of the [rivers] vector and Line 4 trims 25%.

* Lines 6-8: calculate the trimmed mean by including "trim=..." in the `mean` function. Line 7 trims 15% from each end of the _accel_ vector in the [attenu] data frame and Line 8 trims 25%.

<span class="grshilite">Note: this demonstration contains two examples of finding the mean and four examples of finding the trimmed mean.</span>

```{r}

# Find trimmed means for rivers
mean(rivers)
mean(rivers, trim=0.15)
mean(rivers, trim=0.25)

# Find trimmed means for attenu
mean(attenu$accel)
mean(attenu$accel, trim=0.15)
mean(attenu$accel, trim=0.25)

```

### Skill Check: Trimmed Mean

Using the [attitude] data frame, find the mean for _critical_ with 15% trimmed.

```{r ex="ex02.03", type="pre-exercise-code"}

# No pre-exercise code for this exercise

```

```{r ex="ex02.03", type="sample-code"}
# Find the mean for 'critical' with 15% trimmed in the 'attitude' data frame


```


```{r ex="ex02.03", type="solution"}

mean(attitude$critical, trim=0.15)

```

```{r ex="ex02.03", type="sct"}

ex3neq <- "Check the vector name (attitude$critical) and the amount of the trim (0.15)."

ex() %>%
  check_function("mean") %>%
  check_result() %>%
  check_equal(incorrect_msg = ex3neq)

success_msg("Perfect! You can calculate the trimmed mean of a vector!")

```

### Activity 2.3: Trimmed Mean

Using the [cafe] data frame, find the mean for _miles_ with 15% trimmed. Include that answer in the deliverable document for this lab.

```{r ex="act02.03", type="pre-exercise-code"}

cafe <- read.csv('https://labs.basv316.com/cafe.csv')

```

```{r ex="act02.03", type="sample-code"}
# Using the cafe data frame, find the mean for miles with 15% trimmed.



```

-----

## Median

The median is found by listing all of the data items in numeric order and then mechanically finding the middle item. For  example, using the vector 6, 8, 9, the middle item (or median) is 8. If the vector has an even number of items, then the median is calculated as the mean between the two middle items. For example, in the vector 6, 8, 9, 13 the median is 8.5, which is the mean of 8 and 9, the two middle terms. 

The median is very useful in cases where the vector has outliers. As an example of using a median rather than a mean, consider the vector 5, 6, 7, 8, 30. The mean is (5+6+7+8+30)/5 = 56/5 = 11.2. However, 11.2 is clearly much higher than most of the other numbers in that vector since one outlier, 30, is significantly skewing the mean upward. A much better representation of the center of this vector is 7, which is the median. To re-visit the river lengths introduced above, the median of the vector is 425, which is much more representative of the "middle" length than using either the mean or the trimmed mean.

As another example where the median is the best central measure, suppose a newspaper reporter wanted to find the "average" wage for a group of factory workers. The ten workers in that factory all have an annual salary of \$25,000; however, the supervisor has a salary of \$125,000. In the newspaper article, the supervisor is quoted as saying that his workers have an average salary of \$34,090. That is correct if the mean of all those salaries (including the supervisor's) is reported, but that number is clearly higher than any sort of reasonable "average" salary for workers in the factory due to the one outlier. In this case, the median of \$25,000 would be much more representative of the "average" salary. The median is typically reported for salaries, home values, and other vectors where one or two outliers typically distort the reported "middle" value.

If the vector contains no outliers, then the mean and median are the same; but if there are outliers then these two measures become separated, often by a large amount. Consider the [rivers] vector mentioned in the Mean section above. That vector has a mean of 591 and a median of 425. This difference, 166, is about 28% of the mean and is significant. The size of this difference would tell a researcher that there are outliers in the vector that may be skewing the mean.

### Demonstration: Median

To find the median of a vector, use the `median` procedure as found in the _R_ script below.

* Lines 2-3: Calculate the medians for _eruptions_ and _waiting_ in the [faithful] data frame.
* Lines 6-9: Calculate the medians for various vectors in the [iris] data frame.

<span class="grshilite">This demonstration contains six different examples of finding the median.</span>

```{r}
# Find medians for faithful
median(faithful$eruptions)
median(faithful$waiting)

# Find medians for iris
median(iris$Sepal.Width)
median(iris$Sepal.Length)
median(iris$Petal.Width)
median(iris$Petal.Length)

```

### Skill Check: Median

Using the [attitude] data frame, find the median for _critical_.

```{r ex="ex02.04", type="pre-exercise-code"}

# No pre-exercise code for this exercise

```

```{r ex="ex02.04", type="sample-code"}
# Find the median for 'critical' in the 'attitude' data frame


```


```{r ex="ex02.04", type="solution"}

median(attitude$critical)

```

```{r ex="ex02.04", type="sct"}

ex4neq <- "Check that the variable name includes both the data frame and vector (attitude$critical)."

ex() %>%
  check_function("median") %>%
  check_result() %>%
  check_equal(incorrect_msg = ex4neq)

success_msg("Perfect! You can calculate the median of a vector!")

```

### Activity 2.4: Median

Using the [cafe] data frame, find the median for _bill_. Include that answer in the deliverable document for this lab.

```{r ex="act02.04", type="pre-exercise-code"}

cafe <- read.csv('https://labs.basv316.com/cafe.csv')

```

```{r ex="act02.04", type="sample-code"}
# Using the cafe data frame, find the median for bill.



```


-----

## Mode

The mode is used to describe the center of nominal or ordinal data and is nothing more than the item that was most commonly found in the vector. For example, if a question asked respondents to select their zip code from a list of five local codes and "12345" was selected more often than any other then that would be the mode for that item. Calculating the mode is no more difficult than counting the number of times the various values are found and choosing the one that is most frequent. As an example, the [mtcars] data frame lists the following for the number of cylinders in each car:

```{r cyltable, echo=FALSE, message=FALSE, warnings=FALSE, results='asis', tut=FALSE}

dt <- as.data.frame(table(mtcars$cyl))
names(dt) <- c("Cylinders","N")

kable(dt, "html") %>%
  kable_styling(bootstrap_options = "striped", 
                full_width = F,
                position = "center"
                )

```

Since 14 cars have 8 cylinders and that is the most common number of cylinders, that would be the mode for this data item.

It does not make much sense to calculate the mean or median for categorical data since those have no numeric value; however, reports frequently list the mean for Likert-style questions (ordered categorical data) by equating each level of response to a number and then calculating the mean of those numbers. For example, imagine that a student housing survey asked respondents to select among "Strongly Disagree, Disagree, Neutral, Agree, Strongly Agree" for a statement like "I like the food in the cafeteria." That is clearly categorical data and while "Agree" is somehow better than "Disagree" it would be wrong to try to quantify that difference as "two points better." Sometimes, though, researchers will assign a point value to those responses like "Strongly Disagree" is one point, "Disagree" is two points, and so forth. Then they will calculate the mean for the responses on a survey item and report something like "The question about the food in the cafeteria had a mean of 3.24." It would be impossible to know how to interpret that sort of number. Are students 0.24 units above "Neutral" on liking the cafeteria food?

There is no procedure for finding mode in this tutorial but the tutorial on [Frequency Tables] shows an easy to determine the mode of a variable. In fact, the _mtcars\$cylinders_ table above was created with a `table` command in _R_ and that was used to determine the mode for _cylinders_.

-----

## Deliverable

Complete the activities in this lab and consolidate the responses into a single document. Name the document with your name and "Lab 2," like "George Self Lab 2" and submit that document for grade.
